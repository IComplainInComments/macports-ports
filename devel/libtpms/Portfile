# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0

name                libtpms
version             0.10.1
categories          devel
maintainers         @IComplainInComments
license             IBM Corporation
description         Emulation of a Trusted Platform Module Library
long_description    The libtpms library provides software emulation of a Trusted Platform Module (TPM 1.2 and TPM 2.0)
github.setup        stefanberger libtpms 0.10.1 v
homepage            https://github.com/stefanberger/libtpms
github.tarball_from archive

depends_lib         port:automake \
                    port:autoconf \
                    port:libtool \
                    port:pkgconf \
                    port:openssl11

checksums           rmd160  99cb0bf53839a8dc3b11fc0a5b9090fe55602183 \
                    sha256  ebc24f3191d90f6cf0b4d4200cd876db4bd224b3c565708bbea0a82ee275e0fb \
                    size    1399253

configure.cflags    -I${prefix}/libexec/openssl11/include/openssl -Wno-implicit-function-declaration -Wno-int-conversion

configure.pre_args  --with-openssl \
                    --prefix=${prefix} \
                    --with-tpm2

configure.cmd       ./autogen.sh

build.cmd           make
build.target-delete       all
build.target-delete       -w
destroot.cmd        make
destroot.args       install
