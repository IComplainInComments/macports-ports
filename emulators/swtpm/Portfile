# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0

name                swtpm
version             0.10.1
categories          emulators
maintainers         @IComplainInComments
license             IBM Corporation
description         TPM emulator
long_description    Libtpms-based TPM emulator with socket, character device, and Linux CUSE interface.
github.setup        stefanberger swtpm 0.10.1 v
homepage            https://github.com/stefanberger/swtpm
github.tarball_from archive

depends_lib         port:json-glib \
                    port:socat \
                    port:gawk \
                    port:gnutls \
                    port:openssl11 \
                    port:pkgconf \
                    port:libtpms

checksums           rmd160  6de58b85fc0242e49adbf22ba6a9468f0c08980c \
                    sha256  f8da11cadfed27e26d26c5f58a7b8f2d14d684e691927348906b5891f525c684 \
                    size    415992

configure.optflags    -O2
configure.cflags    -I${prefix}/libexec/openssl11/include/openssl -I${prefix}/include -Wno-implicit-function-declaration -Wno-int-conversion

configure.pre_args  --with-openssl \
                    --prefix=${prefix} \

configure.cmd       ./autogen.sh

build.cmd           make
build.target-delete       all
build.target-delete       -w
destroot.cmd        make
destroot.args       install
